!function(e,t){if(!e.document)throw new Error("magicbook requires a window with a document");"object"==typeof module&&"object"==typeof module.exports?module.exports=t(require("jquery"),require("magicbookjs"),e):"function"==typeof define&&define.amd?define(["jquery","magicbook"],t($,Magicbook,e)):t(e.jQuery,Magicbook,e)}("undefined"!=typeof window?window:this,function(e,t,n){function r(n,r){var o,a=n.length,i=[];for(o=0;a>o;o++){var l=e(n[o]),c=t.randomString()+o,u=l.attr("href")||"";l.attr("data-pageKey",c),i.push({key:c,url:"#"===u&&r||u.replace("#","")})}return i}function o(t){if(t){var n={label:"scrollToTop"},r=this,o=e.extend({},n,t),a=o.selector,i=a&&e(a)||e("<button>"+o.label+"</button>");c(i,u+"scroll-top"),c(i,p),i.on("click",function(){r.moveTo()}),!a&&r.$container.append(i)}}function a(t){function o(){function t(e){return e>=0&&$>e}function o(e){for(var t=e||"",n=0;$>n;n++){var r=q[n];if(t.url&&r.url===t.url||t.key&&r.key===t.key)return n}return-1}function a(t){_.removeClass("selected");var n=_.filter('[data-pageKey="'+t.key+'"]');c(n.length&&n||e('a[href="#"]'),"selected")}function x(){var e=f.getCurrentDocUrl(),n=o({url:e});t(n)&&(0===n&&C.hide()||C.show(),n===$-1&&K.hide()||K.show(),a(q[n]))}function w(e){var n=e||"next",r=_.filter(".selected"),l=o({key:r.attr("data-pageKey")});if(-1!==l&&("next"===n&&l++||"prev"===n&&l--,t(l))){var c=q[l],u=c.url;u&&(i.hash=u),a(c)}}function T(){w("prev"),s.trigger("turnPrev")}function j(){w(),s.trigger("turnNext")}var _=e(v.selector),q=r(_,g),$=q.length;if($){var C=h&&e(h)||e("<button>"+b+"</button>"),K=m&&e(m)||e("<button>"+k+"</button>");if(c(_,u+"turn-page__text"),c(C,u+"turn-page__prev"),c(C,p),c(K,u+"turn-page__next"),c(K,p),C.on("click",T),K.on("click",j),!h||!m){var P=e("<div></div>");c(P,u+"turn-page-wrap"),!h&&P.append(C),!m&&P.append(K),f.$container.append(P)}x(),f.moveTo({selector:d,gap:y}),e(n).on("hashchange",function(){x(),f.moveTo({selector:d,gap:y})}),l.prev=T,l.next=j}}if(t){var a={selector:"ul li > *:first-child",prev:{label:"prev"},next:{label:"next"},gap:0},f=this,s=f.$container,d=f.$contentWrap,g=f.config.homeUrl,v=e.extend({},a,t),h=v.prev.selector,b=v.prev.label,m=v.next.selector,k=v.next.label,y=v.gap;f.config.navigatorCallbackQueue.push({success:o})}}var i=n.location,l=t.potion,c=t.addClassName,u="magicbook-agilities-",p=u+"button",f={scrollTop:!0,turnPage:!0};l.agilities=function(t){var n=this,r=e.extend({},f,t);o.call(n,r.scrollTop),a.call(n,r.turnPage)}});