!function(e,n){if(!e.document)throw new Error("magicbook requires a window with a document");"object"==typeof module&&"object"==typeof module.exports?module.exports=n(require("jquery"),require("magicbookjs"),e):"function"==typeof define&&define.amd?define(["jquery","magicbook"],n($,Magicbook,e)):n(e.jQuery,Magicbook,e)}("undefined"!=typeof window?window:this,function(e,n,o){function t(t){function s(n){var o,t=n.children(),a=t.length;for(o=0;a>o;o++){var d=e(t[o]),f=d.children(":first"),g=d.children("ul");g.length&&(r(d,i),f.after(u),!p.expand&&g.hide(),r(d,p.expand&&l||c),s(g))}}function f(e,o){var t=n.isUndefined(o)?e.hasClass(c):o,a=e.children("ul");a.length&&e.removeClass(t&&c||l),a.length&&r(e,t&&l||c),t&&a.slideDown()||a.slideUp()}function g(n){for(var o=n.parents("li"),t=o.length,a=0;t>a;)f(e(o[a++]),!0)}function h(n){return e('[href="'+n+'"]')}var p=e.extend({},d,t);return function(){var n,t=a.hash,i=this,c=i.$navigator,l=c.children(p.selector),u=l.length;for(r(l,"navigator-collapses"),n=0;u>n;n++)s(e(l[n]));i.$navigatorWrap.on("click",".navigator-collapse__toggle",function(n){var o=e(n.currentTarget),a=o.attr("href");a&&t!==a||(f(e(n.currentTarget).parent()),n.stopPropagation())}),i.$container.on("turnPrev",function(){f(l.find(".navigator-collapse > .selected").parent(),!0)}),i.$container.on("turnNext",function(){f(l.find(".navigator-collapse > .selected").parent(),!0)}),e(o).on("hashchange",function(){t=a.hash,g(h(t))}),g(h(t))}}var a=o.location,r=n.addClassName,i="navigator-collapse",c=i+"--close",l=i+"--open",s=i+"__toggle",u='<span class="'+s+'"></span>',d={selector:"ul",expand:!0};n.potion.collapseNavigator=function(e){var n=this,o=t(e);n.config.navigatorCallbackQueue.push({success:o})}});