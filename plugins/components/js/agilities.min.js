!function(e,n,o){function t(e,o){var t,r,a=[];for(t=0,r=e.length;r>t;t++){var i=n(e[t]),l=i.attr("href").replace(/^#/,"")||o;a.push(l)}return a}function r(e){if(e){var o={label:"scrollToTop"},t=this,r=n.extend({},o,e),a=r.selector,c=a&&n(a)||n("<div>"+r.label+"</div>");v(c,i+"scroll-top"),v(c,l),c.on("click",function(){t.moveTo()}),!a&&t.$container.append(c)}}function a(r){function a(){function r(e){return e>=0&&w>e}function a(){var e=u.getCurrentDocUrl(),o=k.indexOf(e);if(r(o)){0===o&&C.hide()||C.show(),o===w-1&&_.hide()||_.show(),T.removeClass("selected");var t=n('a[href="#'+e+'"]');v(t.length&&t||n('a[href="#"]'),"selected")}}function p(e){var n=e||"next",o=u.getCurrentDocUrl(),t=k.indexOf(o);-1!==t&&("next"===n&&t++||"prev"===n&&t--,r(t)&&(c.hash=k[t]))}function s(){p("prev")}function d(){p()}var T=n("a[href^=#]"),k=t(T,h),w=k.length;if(w){var C=g&&n(g)||n("<div>"+x+"</div>"),_=b&&n(b)||n("<div>"+m+"</div>");if(v(C,i+"turn-page__prev"),v(C,l),v(_,i+"turn-page__next"),v(_,l),C.on("click",s),_.on("click",d),!g||!b){var U=n("<div></div>");v(U,i+"turn-page-wrap"),!g&&U.append(C),!b&&U.append(_),u.$container.append(U)}a(),u.moveTo({selector:f}),n(e).on("hashchange",function(){a(),u.moveTo({selector:f})}),o.potion.prev=s,o.potion.next=d}}if(r){var s={prev:{label:"prev"},next:{label:"next"}},u=this,f=u.$contentWrap,d=n.extend({},p,s),h=u.config.homeUrl,g=d.prev.selector,x=d.prev.label,b=d.next.selector,m=d.next.label;u.config.navigatorCallbackQueue.push({success:a})}}var i="magicbook-agilities-",l=i+"button",c=e.location,v=o.addClassName,p={scrollTop:!0,turnPage:!0};o.potion.agilities=function(e){var o=this,t=n.extend({},p,e);r.call(o,t.scrollTop),a.call(o,t.turnPage)}}(window,jQuery,Magicbook);