!function(e,n,o){function t(e,o){var t,r,a=[];for(t=0,r=e.length;r>t;t++){var i=n(e[t]),l=i.attr("href").replace(/^#/,"")||o;a.push(l)}return a}function r(e){if(e){var o={label:"scrollToTop"},t=this,r=n.extend({},o,e),a=r.selector,c=a&&n(a)||n("<div>"+r.label+"</div>");p(c,i+"scroll-top"),p(c,l),c.on("click",function(){t.moveTo()}),!a&&t.$container.append(c)}}function a(r){function a(){function r(e){return e>=0&&C>e}function a(){var e=s.getCurrentDocUrl(),o=w.indexOf(e);if(r(o)){0===o&&_.hide()||_.show(),o===C-1&&U.hide()||U.show(),k.removeClass("selected");var t=n('a[href="#'+e+'"]');p(t.length&&t||n('a[href="#"]'),"selected")}}function v(e){var n=e||"next",o=s.getCurrentDocUrl(),t=w.indexOf(o);-1!==t&&("next"===n&&t++||"prev"===n&&t--,r(t)&&(c.hash=w[t]))}function f(){v("prev")}function T(){v()}var k=n("a[href^=#]"),w=t(k,d),C=w.length;if(C){var _=g&&n(g)||n("<div>"+h+"</div>"),U=x&&n(x)||n("<div>"+b+"</div>");if(p(_,i+"turn-page__prev"),p(_,l),p(U,i+"turn-page__next"),p(U,l),_.on("click",f),U.on("click",T),!g||!x){var $=n("<div></div>");p($,i+"turn-page-wrap"),!g&&$.append(_),!x&&$.append(U),s.$container.append($)}a(),s.moveTo({selector:u,gap:m}),n(e).on("hashchange",function(){a(),s.moveTo({selector:u,gap:m})}),o.potion.prev=f,o.potion.next=T}}if(r){var v={prev:{label:"prev"},next:{label:"next"},gap:0},s=this,u=s.$contentWrap,f=n.extend({},v,r),d=s.config.homeUrl,g=f.prev.selector,h=f.prev.label,x=f.next.selector,b=f.next.label,m=f.gap;s.config.navigatorCallbackQueue.push({success:a})}}var i="magicbook-agilities-",l=i+"button",c=e.location,p=o.addClassName,v={scrollTop:!0,turnPage:!0};o.potion.agilities=function(e){var o=this,t=n.extend({},v,e);r.call(o,t.scrollTop),a.call(o,t.turnPage)}}(window,jQuery,Magicbook);