!function(e,n,a){function i(e,a){var i,o,l=[];for(i=0,o=e.length;o>i;i++){var t=n(e[i]),c=t.attr("href").replace(/^#/,"")||a;l.push(c)}return l}function o(e){var n=s.hash||e;return n.replace(/^#/,"")}function l(e){if(e){var i={label:"scrollToTop"},o=this,l=n.extend({},i,e),t=l.selector,s=t&&n(t)||n("<div>"+l.label+"</div>"),p=n("body"),d=o.$navigatorWrap,f=o.$contentWrap,u=a.potion.scrollToTop=function(e){0!==f.scrollTop()&&f.scrollTop(0)||p.scrollTop(e&&d.height()||0)};a.addClassName(s,c+"scroll-top"),a.addClassName(s,r),s.on("click",function(){u()}),o.config.routeCallbackQueue.push({success:function(){u(!0)}}),!t&&o.$container.append(s)}}function t(e){function l(){function e(e){0>e||e>=f||(0!==e&&g.show()||g.hide(),e!==f-1&&m.show()||m.hide())}function l(n){var a=n||"next",i=o(u),l=p.indexOf(i);-1!==l&&("next"===a&&l++||"prev"===a&&l--,"initialize"!==a&&l>=0&&f>l&&(s.hash=p[l]||""),e(l))}var t=n("a[href^=#]"),p=i(t,u),f=p.length;if(f){var g=v&&n(v)||n("<div>"+h+"</div>"),m=x&&n(x)||n("<div>"+b+"</div>"),C=a.potion.prev=function(){l("prev")},T=a.potion.next=function(){l()};if(a.addClassName(g,c+"prev"),a.addClassName(g,r),a.addClassName(m,c+"next"),a.addClassName(m,r),g.on("click",function(){C()}),m.on("click",function(){T()}),!v||!x){var k=n("<div></div>");a.addClassName(k,c+"flip-wrap"),!v&&k.append(g),!x&&k.append(m),d.$container.append(k)}t.on("click",function(){var a=(n(this).attr("href")||"").replace(/#/,"")||u;e(p.indexOf(a)),s.hash=a}),l("initialize")}}if(e){var t={prev:{label:"prev"},next:{label:"next"}},d=this,f=n.extend({},p,t),u=d.config.homeUrl,v=f.prev.selector,h=f.prev.label,x=f.next.selector,b=f.next.label;d.config.navigatorCallbackQueue.push({success:l})}}var c="magicbook-agilities-",r=c+"button",s=e.location,p={scrollTop:!0,flip:!0};a.potion.agilities=function(e){var a=this,i=n.extend({},p,e);l.call(a,i.scrollTop),t.call(a,i.flip)}}(window,jQuery,Magicbook);