!function(e,n,i){function o(e,i){var o,a,l=[];for(o=0,a=e.length;a>o;o++){var t=n(e[o]),c=t.attr("href").replace(/^#/,"")||i;l.push(c)}return l}function a(e){if(e){var o={label:"scrollToTop"},a=this,l=n.extend({},o,e),r=l.selector,s=r&&n(r)||n("<div>"+l.label+"</div>"),p=n("body"),d=a.$navigatorWrap,f=a.$contentWrap,u=i.potion.scrollToTop=function(e){0!==f.scrollTop()&&f.scrollTop(0)||p.scrollTop(e&&d.height()||0)};i.addClassName(s,t+"scroll-top"),i.addClassName(s,c),s.on("click",function(){u()}),a.config.routeCallbackQueue.push({success:function(){u(!0)}}),!r&&a.$container.append(s)}}function l(e){function a(){function e(e){0>e||e>=d||(0!==e&&x.show()||x.hide(),e!==d-1&&b.show()||b.hide())}function a(n){var i=n||"next",o=p.getCurrentDocUrl(),a=s.indexOf(o);-1!==a&&("next"===i&&a++||"prev"===i&&a--,"initialize"!==i&&a>=0&&d>a&&(r.hash=s[a]||""),e(a))}var l=n("a[href^=#]"),s=o(l,f),d=s.length;if(d){var x=u&&n(u)||n("<div>"+v+"</div>"),b=h&&n(h)||n("<div>"+g+"</div>"),C=i.potion.prev=function(){a("prev")},m=i.potion.next=function(){a()};if(i.addClassName(x,t+"prev"),i.addClassName(x,c),i.addClassName(b,t+"next"),i.addClassName(b,c),x.on("click",function(){C()}),b.on("click",function(){m()}),!u||!h){var T=n("<div></div>");i.addClassName(T,t+"flip-wrap"),!u&&T.append(x),!h&&T.append(b),p.$container.append(T)}l.on("click",function(){var i=(n(this).attr("href")||"").replace(/#/,"")||f;e(s.indexOf(i)),r.hash=i}),a("initialize")}}if(e){var l={prev:{label:"prev"},next:{label:"next"}},p=this,d=n.extend({},s,l),f=p.config.homeUrl,u=d.prev.selector,v=d.prev.label,h=d.next.selector,g=d.next.label;p.config.navigatorCallbackQueue.push({success:a})}}var t="magicbook-agilities-",c=t+"button",r=e.location,s={scrollTop:!0,flip:!0};i.potion.agilities=function(e){var i=this,o=n.extend({},s,e);a.call(i,o.scrollTop),l.call(i,o.flip)}}(window,jQuery,Magicbook);