!function(e,t,n){function r(e,r){var a,o=e.length,l=[];for(a=0;o>a;a++){var i=t(e[a]),c=n.randomString()+a,u=i.attr("href")||"";i.attr("data-pageKey",c),l.push({key:c,url:"#"===u&&r||u.replace("#","")})}return l}function a(e){if(e){var n={label:"scrollToTop"},r=this,a=t.extend({},n,e),o=a.selector,l=o&&t(o)||t("<button>"+a.label+"</button>");c(l,u+"scroll-top"),c(l,p),l.on("click",function(){r.moveTo()}),!o&&r.$container.append(l)}}function o(n){function a(){function n(e){return e>=0&&K>e}function a(e){for(var t=e||"",n=0;K>n;n++){var r=$[n];if(t.url&&r.url===t.url||t.key&&r.key===t.key)return n}return-1}function o(e){C.removeClass("selected");var n=C.filter('[data-pageKey="'+e.key+'"]');c(n.length&&n||t('a[href="#"]'),"selected")}function m(){var e=s.getCurrentDocUrl(),t=a({url:e});n(t)&&(0===t&&P.hide()||P.show(),t===K-1&&N.hide()||N.show(),o($[t]))}function T(e){var t=e||"next",r=C.filter(".selected"),i=a({key:r.attr("data-pageKey")});if(-1!==i&&("next"===t&&i++||"prev"===t&&i--,n(i))){var c=$[i],u=c.url;u&&(l.hash=u),o(c)}}function _(){T("prev"),v.trigger("turnPrev")}function w(){T(),v.trigger("turnNext")}var C=t(d.selector),$=r(C,g),K=$.length;if(K){var P=h&&t(h)||t("<button>"+b+"</button>"),N=x&&t(x)||t("<button>"+k+"</button>");if(c(C,u+"turn-page__text"),c(P,u+"turn-page__prev"),c(P,p),c(N,u+"turn-page__next"),c(N,p),P.on("click",_),N.on("click",w),!h||!x){var Q=t("<div></div>");c(Q,u+"turn-page-wrap"),!h&&Q.append(P),!x&&Q.append(N),s.$container.append(Q)}m(),s.moveTo({selector:f,gap:y}),t(e).on("hashchange",function(){m(),s.moveTo({selector:f,gap:y})}),i.prev=_,i.next=w}}if(n){var o={selector:"ul li > *:first-child",prev:{label:"prev"},next:{label:"next"},gap:0},s=this,v=s.$container,f=s.$contentWrap,g=s.config.homeUrl,d=t.extend({},o,n),h=d.prev.selector,b=d.prev.label,x=d.next.selector,k=d.next.label,y=d.gap;s.config.navigatorCallbackQueue.push({success:a})}}var l=e.location,i=n.potion,c=n.addClassName,u="magicbook-agilities-",p=u+"button",s={scrollTop:!0,turnPage:!0};i.agilities=function(e){var n=this,r=t.extend({},s,e);a.call(n,r.scrollTop),o.call(n,r.turnPage)}}(window,jQuery,Magicbook);